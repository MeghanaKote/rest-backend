<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    #symptomTable thead {
      display: none; /* Hide the table headers by default */
    }
  </style>
</head>
<body>
<form method="post" action="/getSymptom" id="getSymptomForm" class="">
  <div class="form-group">
    <label for="patientId">Patient ID:</label>
    <input type="text" class="form-control" id="getPatientId" name="patientId" required>
  </div>
</form>
<button type="button" class="btn btn-primary" onclick="getSymptom()">Symptom Log</button>
<table id="symptomTable">
  <thead>
  <tr>
    <th>Symptom ID</th>
    <th>Patient ID</th>
    <th>Symptom</th>
    <th>Severity</th>
  </tr>
  </thead>
  <tbody></tbody>
</table>


<script>
function getSymptom() {
     var patientId = document.getElementById("getPatientId").value;
     document.getElementById("symptomTable").getElementsByTagName("thead")[0].style.display = "table-header-group";

    // Make a fetch request to your Spring Boot endpoint
    fetch('/getSymptom?patientId=' + patientId)
        .then(function(response) {
            if (response.status !== 200) {
                console.log('Error: ' + response.status);
                return;
            }
            return response.json(); // Assuming the response is JSON
        })
        .then(function(data) {

            var symptomResult = document.getElementById('symptomResult');
         //   symptomResult.innerHTML = '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
         var jsonData  = data;
        // Get the table body
        var tableBody = document.getElementById("symptomTable").getElementsByTagName('tbody')[0];
        // Clear existing rows in the table
        while (tableBody.firstChild) {
            tableBody.removeChild(tableBody.firstChild);
        }
        // Loop through the JSON data and populate the table
        for (var i = 0; i < jsonData.length; i++) {
            var row = tableBody.insertRow(i);

            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);

            cell1.innerHTML = jsonData[i].symptomId;
            cell2.innerHTML = jsonData[i].patientId;
            cell3.innerHTML = jsonData[i].symptom;
            cell4.innerHTML = jsonData[i].severity;
        }

        })
        .catch(function(error) {
            console.log('Fetch error: ' + error);
        });
}
</script>

</body>
</html>